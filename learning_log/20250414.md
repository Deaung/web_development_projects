## Create ë¦¬íŒ©í† ë§

new car ë²„íŠ¼ ëˆ„ë¥¼ë•Œ Modal ì´ ë‚˜ì˜´, ë™ì¼í•œ í¼ê³¼ í•„ë“œì¸ Edit í¼ì„ ì‚¬ìš© ì˜ˆì •

new car í¼ì˜ í…ìŠ¤íŠ¸ í•„ë“œë¥¼ ë Œë”ë§í•˜ëŠ” ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ ìƒì„±

í…ìŠ¤íŠ¸í•„ë“œë¥¼ ìì²´ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„í•  í›„ 

```tsx
import { Car } from "../types";
import {DialogContent} from "@mui/material";

type DialogFormProps = {
  car:Car;
  handleChange: (event: React.ChangeEvent<HTMLInputElement>) => 
    void;
}

function CarDialogContent({ car, handleChange } : 
  DialogFormProps){
    return(
      <DialogContent>
        <input placeholder="Brand" name="brand" value={car.brand} onChange={handleChange}/><br />

        <input placeholder="Model" name="model" value={car.model} onChange={handleChange}/><br />

        <input placeholder="color" name="color" value={car.color} onChange={handleChange}/><br />

        <input placeholder="Year" name="modelYear" value={car.modelYear} onChange={handleChange}/><br />

        <input placeholder="Reg.nr" name="registrationNumber" value={car.registrationNumber} onChange={handleChange}/><br />

        <input placeholder="Price" name="price" value={car.price} onChange={handleChange}/><br />
        </DialogContent>
    );
}

export default CarDialogContent;
```
ì´ìƒê³¼ ê°™ì´ CarDialogContent ì»´í¬ë„ŒíŠ¸ ì‘ì„±í–ˆìŠµë‹ˆë‹¤(í˜„ì¬ëŠ” AddCarì™€ ë™ì¼í•œê¸°ëŠ¥)

AddCar.tsxì— CarDialogContent ì»´í¬ë„ŒíŠ¸ ë“¤ê³ ì™€ ë¶™ì—¬ë„£ìœ¼ë©´ ë ê²ƒ

```tsx
import { useState } from "react";
import {Dialog} from "@mui/material";
import {DialogActions} from "@mui/material";

import {DialogTitle} from "@mui/material";
import { useMutation, useQueryClient } from "@tanstack/react-query";
import { addCar } from "../api/carapi";
import CarDialogContent from "./CarDialogContent";

function AddCar() {
  const [ open, setOpen ] = useState(false);
  const [ car, setCar ] = useState<Car>({
    brand: '',
    model: '',
    color: '',
    registrationNumber: '',
    modelYear: 0,
    price: 0,
  });
  const queryClient = useQueryClient();

  const { mutate } = useMutation(addCar, {
    onSuccess: () => {
      queryClient.invalidateQueries(["cars"]);
    },
    onError: (err) => {
      console.log(err);
    },
  });

  const handleClickOpen = () => {
    setOpen(true);
  };

  const handleClose = () => {
    setOpen(false);
  }

  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) =>
  {
    setCar({...car, [event.target.name]:
      event.target.value});
  }

  // ìë™ì°¨ë¥¼ ì €ì¥í•˜ê³  ëª¨ë‹¬ í¼ì„ ë‹«ì•„ì•¼ í•¨.
  const handleSave = () => {
    mutate(car);
    setCar({brand:'', model:'', color:'', registrationNumber:'', 
      modelYear: 0, price: 0 });
    handleClose();
  }

  return(
    <>
      <button onClick={handleClickOpen}> New ì°¨ëŸ‰ ì¶”ê°€ ğŸš—</button>
      <Dialog open={open} onClose={handleClose}>
        <DialogTitle>New Car</DialogTitle>
        <CarDialogContent car={car} handleChange={handleChange}/>
        <DialogActions>
          <button onClick={handleClose}>ì·¨ì†Œ</button>
          <button onClick={handleSave}>ì €ì¥</button>
        </DialogActions>
      </Dialog>


    </>
  );
}

export default AddCar;
```
ì´ìƒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§ ì§„í–‰ í•˜ì˜€ëŠ”ë° ì´ì „ ë²„ì „ê³¼ì˜ ê¸°ëŠ¥ìƒì˜ ì°¨ì´ì ì´ ì—†ìœ¼ë¯€ë¡œ 

ìˆ˜ì •ê¸°ëŠ¥ ì¶”ê°€ë¡œ ë„˜ì–´ê°

## ìˆ˜ì •ê¸°ëŠ¥ ì¶”ê°€

- ê° í…Œì´ë¸” ë¡œìš°ì— Edit ë²„íŠ¼ ì¶”ê°€ì˜ˆì •, ë²„íŠ¼ ëˆ„ë¥´ë©´ ì‚¬ìš©ìê°€ ê¸°ì¡´ ìë™ì°¨ í¸ì§‘í•˜ê³  ë³€ê²½ì‚¬í•­ ì €ì¥í•  ìˆ˜ ìˆëŠ” modal ì´ ì—´ë¦¬ê²Œ í•¨

components í´ë” EditCar.tsx ìƒì„±

```tsx
import { CarResponse } from "../types"
import { useState } from "react";

type FormProps = {
  cardata: CarResponse
}

function EditCar ({ cardata } : FormProps) {

  const [car, setCar] = useState<Car>({
    brand:'',
    model:'',
    color:'',
    registrationNumber:'',
    modelYear:0,
    price:0,
  });


  return(
    <>
    </>
  )
}

export default EditCar;
```

ì´ìƒê³¼ ê°™ì´ ì‘ì„±í•  ê²½ìš° EditCar ì»´í¬ë„ŒíŠ¸ì—ëŠ” í•„ìˆ˜ì ìœ¼ë¡œ cardataê°€ í•„ìš”í•˜ë‹¤ëŠ” ì ë§Œ ëª…ì‹œí•œê²ƒ ë¿ì„

ë²„íŠ¼ ëˆ„ë¥¼ì‹œ modal ì´ ë‚˜ì™€ì•¼í•˜ì§€ë§Œ Createì—ì„œ ì–´ë–»ê²Œ í–ˆëŠ”ì§€ ê¸°ì–µ

AddCar.tsxì™€ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ EditCar.tsx ì‘ì„±

CarDialogContent importí›„ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë Œë”ë§ í•´ì•¼í•¨

ë˜í•œ í¸ì§‘í•œ ê°’ì„ ìë™ì°¨ ìƒíƒœì— ì €ì¥í•˜ëŠ” handleChange í•¨ìˆ˜ ìˆì–´ì•¼í•¨

```tsx
import { Dialog, DialogTitle, DialogActions } from "@mui/material";
import { CarResponse } from "../types"
import { useState } from "react";
import CarDialogContent from "./CarDialogContent";

type FormProps = {
  cardata: CarResponse
}

function EditCar ({ cardata } : FormProps) {
  const [open, setOpen ] = useState(false);

  const [car, setCar] = useState<Car>({
    brand:'',
    model:'',
    color:'',
    registrationNumber:'',
    modelYear:0,
    price:0,
  });

  const handleClickOpen = () =>{
    setCar({
      brand:'cardata.brand',
      model:'cardata.model',
      color:'cardata.color',
      registrationNumber:'cardata.registrationNumber',
      modelYear:cardata.modelYear,
      price:cardata.price,
    })
    setOpen(true);
  }

  const handleClose = () =>{
    setOpen(false)
  }

  const handleSave = () => {
    setOpen(false)
  }

  const handleChange = (envent:ReactDOM.ChangeEvent<HTMLInputElement>) =>{
    setCar((...car,[event.target.name]))
  }

  return(
    <>
      <button onClick={handleClickOpen}>
        ìˆ˜ì •
      </button>
      <Dialog open={open} onClose={handleClose}>
        <DialogTitle>Edit Car</DialogTitle>
        <CarDialogContent car={car} handleChange={handleChange}/>
          <DialogActions>
          <button onClick={handleClose}></button>
          <button onClick={handleSave}></button>
        </DialogActions>
      </Dialog>
    </>
  )
}

export default EditCar;
```

ì´ìƒì˜ ì½”ë“œê¹Œì§€ ì‘ì„±ì‹œ í”„ë¡¶ã…‚ì˜ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬ëœ ìë™ì°¨ ê°ì²´ì˜ ê°’ì´ ë¶ˆëŸ¬ì™€ì§

('ìˆ˜ì •')ë²„íŠ¼ í´ë¦­ì‹œ Modalì— ê¸°ì¡´ ìë™ì°¨ ì •ë³´ê°€ ì±„ì›Œì ¸ìˆìŒ


```tsx
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { getCars, deleteCar } from "../api/carapi";
import { DataGrid, GridColDef } from "@mui/x-data-grid";
import { Snackbar } from "@mui/material";
import { useState } from "react";
import AddCar from "./AddCar";
import EditCar from "./EditCar";

function Carlist(){
  const [open, setOpen] = useState(false);

  const queryClient = useQueryClient();

  const { data, error, isSuccess }  = useQuery({
    queryKey:["cars"],
    queryFn: getCars
  });

  const { mutate } = useMutation(deleteCar, {
    onSuccess : () =>{
      queryClient.invalidateQueries({queryKey:['cars']});
      setOpen(true);
    },
    onError : (err) => {
      console.log(err)
    },
  });

  const colums: GridColDef[] = [
    {field: 'brand', headerName: 'Brand', width: 200},
    {field: 'model', headerName: 'Model', width: 200},
    {field: 'color', headerName: 'Color', width: 200},
    {field: 'registrationNumber', headerName: 'Reg.nr.', width: 150},
    {field: 'modelYear', headerName: 'ModelYear', width: 150},
    {field: 'price', headerName: 'Price', width: 150},
    {
      field:'edit',
      headerName:'',
      width: 90,
      sortable: false,
      disableColumnMenu: true,
      renderCe
    }
    {
      field: 'delete',
      headerName: '',
      width:90,
      sortable: false,
      filterable: false,
      disableColumnMenu: true,
      renderCell: (params: GridCellParams) => 
        <button
          onClick={() => {
            if(window.confirm(`${params.row.brand}ì˜ ${params.row.model}ì„ ì‚­ì œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)){
              mutate(params.row._links.car.href)
            }
            }}
        >
          ì‚­ì œ
        </button>
    }
  ]

  if(!isSuccess){
    return <span>Now Loading...</span>
  }
  else if(error){
    return <span>ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì¤‘ ì˜¤ë¥˜ ë°œìƒ</span>
  }
  else{
    return(
      <>
      <AddCar />
      <DataGrid
        rows={data}
        columns={colums}
        getRowId={row => row._links.self.href}
        disableRowSelectionOnClick={true}
      />

      <Snackbar
        open={open}
        autoHideDuraction ={2000}
        onClose={() => setOpen(false)}
        message="ìë™ì°¨ê°€ ì‚­ì œ ë˜ì—ˆìŠµë‹ˆë‹¤"
      />
      </>
    );
  }
}
export default Carlist;
```

Carlistì— \EditCar ì»´í¬ë„ŒíŠ¸ ë¶ˆëŸ¬ì˜´, ì´ë¥¼ ìœ„í•´ GridColDefë¥¼ ì •ì˜í•´ì„œ editê´€ë ¨ ì»¬ëŸ¼ì •ë³´ ì‘ì„±

ì—¬ê¸°ê¹Œì§€ ì‘ì„±í•˜ë©´ Frontend ì—ì„œëŠ” ì™„ë£Œ ë˜ì—ˆëŠ”ë° ìˆ˜ì •ëœ ìë™ì°¨ ì •ë³´ë¥¼ ë°±ì—”ë“¤ ì „ì†¡í•˜ëŠ” ìˆ˜ì • ìš”ì²­ êµ¬í˜„

http://localhost:8080/api/cars[carid] URLë¡œ PUTìš”ì²­ ë³´ë‚´ì•¼í•¨

types.ts íŒŒì¼


```ts

export type CarEntry = {
  car: Car;
  url: string;
}

```
ë§í¬ëŠ” idê°€ í•„ìš”í•˜ë‹¤ëŠ” ì ì—ì„œ ì‚­ì œê¸°ëŠ¥ì˜ ë§í¬ì™€ ë™ì¼

ìš”ì²­ ë³¸ë¬¸ì—ëŠ” ìˆ˜ì •ëœ ìë™ì°¨ ê°ì²´ì™€ ìƒì„±ê¸°ëŠ¥ì— ëŒ€í•´ì„œ ì„¤ì •í•œ  

'Content-Type': 'application/json' í—¤ë”ê°€ í¬í•¨

* ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì—ì„œ ë³€í˜•í•¨ìˆ˜ëŠ” í•˜ë‚˜ì˜ ë§¤ê°œë³€ìˆ˜ë§Œ ë°›ì„ ìˆ˜ ìˆì§€ë§Œ, ë°©ê¸ˆ CarEntryì²˜ëŸ¼ 
ê°ì²´ ë‚´ì— ê°ì²´ë¥¼ ì§‘ì–´ë„£ëŠ” ë°©ì‹ìœ¼ë¡œ ì „ë‹¬ ê°€ëŠ¥

# ë‚´ì¼ ìˆ˜ì—…

csv íŒŒì¼ ì¶”ì¶œ -> ë°±ì—”ë“œ ì¿¼ë¦¬ ì¶”ì¶œ í˜•íƒœë¡œ ë°ì´í„° ì§‘ì–´ë„£ì€ ìƒíƒœ ì´ê²ƒì„ csv ì¶”ì¶œ ê°€ëŠ¥
-> dbë„£ëŠ” ë°©ë²•ë„ ìˆìŒ

HTML íƒœê·¸ë¡œ ì‘ì„±í•œ input / button í•˜ëŠ”ê²ƒë“¤ material ui ë¥¼ ì ê·¹ì  ì‚¬ìš©í•´ ë°”ê¿€ì˜ˆì •

icon ì ìš©í• ê²ƒì´ê¸° ë•Œë¬¸